<div class="diagram-container">
  <script>

var dataset = {
  name: "Colors",
    children: [{ 
      name: "Standard Colors",
        children: [{
          name: "Greens",
            children: [
              { name: "Alien Armpit", size: 3938 }, 
              { name: "Booger Buster", size: 3812 }, 
              { name: "Gargoyle Gas", size: 6714 }, 
              { name: "Sea Serpent", size: 743 }
            ]}, { 
          name: "Blues",
            children: [
              { name: "Alien Armpit", size: 3534 }, 
              { name: "Alien Armpit", size: 5731 }, 
              { name: "Alien Armpit", size: 7840 }, 
              { name: "Alien Armpit", size: 5914 }, 
              { name: "Alien Armpit", size: 3416 }
            ]}, { 
          name: "Purples",
            children: [
              { name: "Black", size: 7074 }
            ]}
        ]}, {
      name: "Silly Scents",
        children: [
          { name: "Alien Armpit", size: 17010 }, { 
          name: "Greens",
            children: [
              { name: "Alien Armpit", size: 1983 }, 
              { name: "Alien Armpit", size: 2047 }, 
              { name: "Alien Armpit", size: 1375 }, 
              { name: "Alien Armpit", size: 8746 }, 
              { name: "Alien Armpit", size: 2202 }, 
              { name: "Alien Armpit", size: 1382 }, 
              { name: "Alien Armpit", size: 1629 }, 
              { name: "Alien Armpit", size: 1675 }, 
              { name: "Alien Armpit", size: 2042 }
            ]}, 
              { name: "Alien Armpit", size: 1041 }, 
              { name: "Alien Armpit", size: 5176 }, 
              { name: "Alien Armpit", size: 449 }, 
              { name: "Alien Armpit", size: 5593 }, 
              { name: "Alien Armpit", size: 5534 }, 
              { name: "Alien Armpit", size: 9201 }, 
              { name: "Alien Armpit", size: 19975 }, 
              { name: "Alien Armpit", size: 1116 }, 
              { name: "Alien Armpit", size: 6006 
            }]
      }]
  };
    
    var margin = {top: 40, right: 10, bottom: 10, left: 10},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;
    var color = d3.scale.category20c();


    var treemap = d3.layout.treemap()
      .size([width, height])
      .sticky(true)
      .value(function(d) { return d.size; });

    var div = d3.select("body")
      .append("div")
      .style("position", "relative")
      .style("width", (width + margin.left + margin.right) + "px")
      .style("height", (height + margin.top + margin.bottom) + "px")
      .style("left", margin.left + "px")
      .style("top", margin.top + "px");

      var node = div.datum(dataset).selectAll(".node")
        .data(treemap.nodes)
        .enter().append("div")
        .attr("class", "node")
        .call(position)
        .style("background", function(d) { return d.children ? color(d.name) : null; })
        .text(function(d) { return d.children ? null : d.name; });

      d3.selectAll("input").on("change", function change() {
        var value = this.value === "count"
          ? function() { return 1; }
          : function(d) { return d.size; };

          node
            .data(treemap.value(value).nodes)
            .transition()
            .duration(1500)
            .call(position);
      });

    function position() {
      this.style("left", function(d) { return d.x + "px"; })
        .style("top", function(d) { return d.y + "px"; })
        .style("width", function(d) { return Math.max(0, d.dx - 1) + "px"; })
        .style("height", function(d) { return Math.max(0, d.dy - 1) + "px"; });
    }

  </script>
</div>
